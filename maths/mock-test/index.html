<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Mock Tests | Qmantra</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="../../style.css">
</head>

<body>

<header class="site-header">
  <h1>Maths Mock Tests</h1>
  <p>Free mock tests based on competitive exam pattern</p>
</header>

<nav>
  <a href="/qmantra-site/">Home</a>
  <a href="/qmantra-site/maths/">Maths</a>
</nav>

<main class="page-content">

  <h2 class="section-title">Available Mock Tests</h2>

  <!-- ✅ SINGLE GRID ONLY -->
  <div class="mock-grid">

    <!-- MOCK 4 (NEW) -->
    <a class="mock-card" data-json="./mock-test-4/data/mcq.json" href="./mock-test-4/">
      <span class="badge new" style="display:none">NEW</span>
      <h3>Maths Mock Test – 4</h3>
      <p>Latest SSC Pattern · 20 Questions</p>
      <span class="mock-link">Start Mock Test →</span>
    </a>

    <!-- MOCK 3 -->
    <a class="mock-card" data-json="./mock-test-3/data/mcq.json" href="./mock-test-3/">
      <h3>Maths Mock Test – 3</h3>
      <p>Moderate Level</p>
      <span class="mock-link">Start Mock Test →</span>
    </a>

    <!-- MOCK 2 -->
    <a class="mock-card" data-json="./mock-test-2/data/mcq.json" href="./mock-test-2/">
      <h3>Maths Mock Test – 2</h3>
      <p>Moderate Level</p>
      <span class="mock-link">Start Mock Test →</span>
    </a>

    <!-- MOCK 1 -->
    <a class="mock-card" data-json="./mock-test-1/data/mock-test-1.json" href="./mock-test-1/">
      <h3>Maths Mock Test – 1</h3>
      <p>20 Questions · 20 Minutes</p>
      <span class="mock-link">Start Mock Test →</span>
    </a>

    <!-- SSC MOCK -->
    <a class="mock-card" data-json="./ssc-level/data/mcq.json" href="./ssc-level/">
      <h3>SSC Level Mock</h3>
      <p>Exam Pattern Based</p>
      <span class="mock-link">Start Mock Test →</span>
    </a>

  </div>

</main>

<!-- ✅ AUTO NEW + AUTO SORT -->
<script>
(async function () {
  const grid = document.querySelector(".mock-grid");
  if (!grid) return;

  const cards = Array.from(grid.children);

  await Promise.all(cards.map(async card => {
    const jsonUrl = card.dataset.json;
    if (!jsonUrl) return;

    try {
      const res = await fetch(jsonUrl);
      const data = await res.json();
      const updatedOn = data.meta?.updatedOn;
      if (!updatedOn) return;

      const days =
        (new Date() - new Date(updatedOn)) / (1000 * 60 * 60 * 24);

      if (days <= 7) {
        card.dataset.new = "true";
        const badge = card.querySelector(".badge.new");
        if (badge) badge.style.display = "inline-block";
      } else {
        card.dataset.new = "false";
      }
    } catch {}
  }));

  cards.sort((a, b) =>
    (b.dataset.new === "true") - (a.dataset.new === "true")
  );

  cards.forEach(card => grid.appendChild(card));
})();
</script>

</body>
</html>
